!function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);n(1),n(6);var a={templateUrl:"components/shared/dropdown/dropdown.html",controller:class{init(){this.selectedItem=this.data[0]}onItemClick(t){t!==this.selectedItem&&(this.selectedItem=t,this.isOpened=!1,this.onChange({item:this.selectedItem}))}close(){this.isOpened=!1}toggle(){this.isOpened=!this.isOpened}$onChanges(t){this.init()}},bindings:{data:"<",onChange:"&"}};n(8),n(10);var o={templateUrl:"components/communitiesImpacted/stakeholders/stakeholders.html",controller:class{init(){this.stakeholders&&this.setCurrentStakeholder(0)}slideStakeholder(t){let e=(this.stakeholders.data.length+this.currentStakeholderIndex+(t?1:-1))%this.stakeholders.data.length;this.setCurrentStakeholder(e)}setCurrentStakeholder(t){this.currentStakeholderIndex=t,this.currentStakeholder=this.stakeholders.data[t],this.totalDollarValue=this.calculateTotalDollarValue(this.currentStakeholder)}calculateDollarValue(t,e){if((e=e||this.currentStakeholder)&&this.stakeholders)return t.dollarValue*this.stakeholders.multiplier*e.number}calculateTotalDollarValue(t){if(t=t||this.currentStakeholder)return t.dollarQuantifiables.reduce((e,n)=>e+(n.isPositive?this.calculateDollarValue(n,t):-this.calculateDollarValue(n,t)),0)}$onChanges(t){this.init()}},bindings:{stakeholders:"<",staticResources:"<"}};var i={templateUrl:"components/overview/socialImpact/socialImpact.html",controller:class{constructor(){let t=o.controller;this.stakeholdersController=new t}init(){this.yearsData&&(this.selectedYear=this.yearsData[0],this.changeDataset(this.selectedYear.dataset[0]))}changeYear(t){t&&(this.selectedYear=t,this.changeDataset(this.selectedYear.dataset[0]))}changeDataset(t){t&&(this.selectedDataset=t,this.stakeholdersController.stakeholders=this.selectedDataset.stakeholders,this.sroiMultiplier=this.calculateSroiMultiplier(this.selectedDataset),this.positiveQuantifiablesNumber=this.selectedDataset.stakeholders.data.reduce((t,e)=>t+e.quantifiables.filter(t=>t.isPositive).length,0),this.negativeQuantifiablesNumber=this.selectedDataset.stakeholders.data.reduce((t,e)=>t+e.quantifiables.filter(t=>!t.isPositive).length,0),this.positiveNonQuantifiablesNumber=this.selectedDataset.stakeholders.data.reduce((t,e)=>t+e.nonQuantifiables.filter(t=>t.isPositive).length,0),this.negativeNonQuantifiablesNumber=this.selectedDataset.stakeholders.data.reduce((t,e)=>t+e.nonQuantifiables.filter(t=>!t.isPositive).length,0))}calculateSroiMultiplier(t){return this.totalIncome=t.stakeholders.data.reduce((t,e)=>t+this.stakeholdersController.calculateTotalDollarValue(e),0),this.totalInvestment=t.investments.reduce((t,e)=>t+parseInt(e.value),0),Math.round(this.totalIncome/this.totalInvestment*10)/10}onViewImpactClick(){document.querySelector('a[href="#communitiesImctd"]').click()}$onChanges(t){this.init()}},bindings:{yearsData:"<",staticResources:"<"}};n(12);var s={templateUrl:"components/communitiesImpacted/socialReturn/socialReturn.html",controller:class{constructor(){let t=o.controller;this.stakeholdersController=new t}init(){this.yearsData&&this.changeYear(this.yearsData[0])}changeYear(t){t&&(this.selectedYear=t,this.changeDataset(this.selectedYear.dataset[0]))}changeDataset(t){t&&this.selectedDataset!==t&&(this.selectedDataset=t,this.stakeholdersController.stakeholders=this.selectedDataset.stakeholders,this.stakeholdersController.stakeholders.data.length>2?this.addScroll():this.removeScroll(),this.stakeholdersColors=this.selectedDataset.stakeholders.data.map(t=>this.getRandomColor()),this.investmentsColors=this.selectedDataset.investments.map(t=>this.getRandomColor()))}addScroll(){var t=setInterval(function(){var e=document.querySelector(".pro_pdng.scrollable"),n=document.querySelectorAll(".pro_pdng.scrollable .progress_div3.core.ng-scope"),a=n[0].clientHeight;if(e&&a>0&&n){var o=n[0].clientHeight+n[1].clientHeight;e.style.height=o+"px",e.style.overflowY="scroll",clearInterval(t)}},100)}removeScroll(){var t=setInterval(function(){var e=document.querySelector(".pro_pdng.scrollable"),n=document.querySelectorAll(".pro_pdng.scrollable .progress_div3.core.ng-scope"),a=n[0].clientHeight;e&&a>0&&n&&(e.style.height="auto",e.style.overflowY="unset",clearInterval(t))},100)}updateSocialReturnsChart(){let t=this.selectedDataset.stakeholders.data.map((t,e)=>({label:t.name,value:this.stakeholdersController.calculateTotalDollarValue(t),color:this.stakeholdersColors[e]}));InitSocialReturnFusionChart(this.totalIncome,t)}updateInvestmentChart(){let t=this.selectedDataset.investments.map((t,e)=>({Label:t.name,Value:t.value,color:this.investmentsColors[e]}));initInvestmentFusionChart(this.totalInvestment,t)}calculateSroiMultiplier(t){if(t=t||this.selectedDataset)return this.totalIncome=this.calculateTotalIncome(t),this.totalInvestment=this.calculateTotalInvestment(t),this.updateSocialReturnsChart(),this.updateInvestmentChart(),Math.round(100*this.totalIncome/this.totalInvestment)}calculateTotalIncome(t){return(t=t||this.selectedDataset).stakeholders.data.reduce((t,e)=>t+this.stakeholdersController.calculateTotalDollarValue(e),0)}calculateTotalInvestment(t){return(t=t||this.selectedDataset).investments.reduce((t,e)=>t+parseInt(e.value),0)}calculateStakeholderValuePercent(t){return Math.round(100*this.stakeholdersController.calculateTotalDollarValue(t)/this.totalIncome)}calculateInvestmentValuePercent(t){return Math.round(100*t.value/this.totalInvestment)}getRandomColor(){let t="#";for(let e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}showInvestmentModal(){this.newInvestment={name:"",value:0},this.investmentModal=$("#investmentModal"),this.investmentModal.modal("show")}addInvestment(t){this.selectedDataset.investments.push(t),this.investmentModal.modal("toggle"),this.newInvestment={}}$onChanges(t){this.init()}},bindings:{yearsData:"<",staticResources:"<"}};let r=angular.module("MainApp",["ng-fusioncharts"]).component("dropdown",a).component("socialImpact",i).component("stakeholders",o).component("socialReturn",s);r.config(["$locationProvider",function(t){t.html5Mode({enabled:!0,requireBase:!1})}]),r.filter("range",function(){return function(t,e){e=parseInt(e);for(var n=0;n<e;n++)t.push(n);return t}}),r.controller("MainCtrl",["$scope","$http","$location",function(t,e,n){t.mapclickfun=r,t.output=[],t.social_chart_arr=[],t.selcountry={},t.search_org=function(e){var n=c(t.list_org,3);t.orgSlider=[];var a=[];""!=e?($.each(n,function(t,n){$.each(n,function(t,n){-1!=n.Title.indexOf(e)&&a.push(n)})}),t.orgSlider.push(a)):t.orgSlider=n},t.search_milestone=function(e){var n=t.milestone1;t.milestone=[];""!=e?$.each(n,function(n,a){-1!=a.MainTitle.indexOf(e)&&t.milestone.push(a)}):t.milestone=n},t.changeCountry=function(e){var n=t.Communities.find(t=>t.CountryName===e);n&&(t.community=n,t.selectedYear=n.years[0],t.selectedDataset=t.selectedYear.dataset[0],t.CountryName=n.CountryName,t.CommunityName=n.CommunityName,t.CountryIcons=n.CountryIcons)},t.dopopover=s,t.outcome=[],t.obj1={},t.obj2={},t.outcomehighlight=function(e,n){$.each(t.obj1,function(e,n){t.obj1[e]=!1}),t.obj1[n]=!0,$.each(t.obj2,function(e,n){t.obj2[e]=!1}),t.obj2[e]=!0},t.showformaula=function(e,n){$.each(t.impact_fg[e],function(n,a){t.impact_fg[e][n]=!1}),t.impact_fg[e][n]=!0},t.Funding_rasing_GraphPlotting1=[],t.Investments=[],t.impact_fg={},t.MeasurableOutcomes1=[],t.investmentChart=[],t.socialReturnContainer=[],t.countrylist=[],t.countrylist_new=[],t.CountryName=[],t.countryItemsList=[],t.ttlinvestment=0,t.multiplycm=1,t.ttlsocialinvestment=0;let a,o=n.search().dataSource;o?(o="https://cors-anywhere.herokuapp.com/"+o,a=new URL(o).origin):o="inpact-network-ui-json.json";let i={method:"GET",url:o};function s(e,n,a){t.slect_vl=e,t.selct_icon=n,t.activeCircle=a}function r(e){t.countryItemsList=t.Communities[e].ListofItems,t.CountryName=t.Communities[e].CountryName,t.CommunityName=t.Communities[e].CommunityName,t.CountryIcons=t.Communities[e].CountryIcons,t.selcountry[t.CountryName]=!0}function l(e){t.output=t.outcomeInfo[e].Project_Output_Section;var n=[];t.obj={},$.each(t.output,function(e,a){t.obj[e]=!1,n.push(a.Outcome),$.each(a.Outcome,function(n,a){a.id=e,t.outcome.push(a)})})}function c(t,e){for(var n=[],a=0;a<t.length;a+=e)n.push(t.slice(a,a+e));return n}function u(e,n){t.desc=e.Description,t.item_roles=e.RoleInvolved,t.tags=e.Tags,$(".box1").css("border","1px solid #07c776"),$(".box1").removeClass("boxselect"),$("#item_"+n).addClass("boxselect")}function m(e){e&&(t.project=e.Project_Name,t.Project_Primary_key=e.Project_Primary_key,t.Project_Icon=e.Project_Icon,t.Project_Insight=e.Project_Insight,t.Proj_ID=e.Proj_ID,$.each(t.obj1,function(e,n){t.obj1[e]=!1}),t.obj1[e.Project_Primary_key]=!0,t.goalItems=e.goalItems)}a&&(i.headers={origin:a}),e(i).then(function(e){t.projectData=e.data,t.ProjSec=e.data.ProjectSection,t.overview=e.data.Overview,t.gallery=e.data.Overview.Gallery,t.time_line=e.data.Overview.TimelineInfo,t.TimelineInsight=e.data.Overview.TimelineInsight,t.fundInfo=e.data.Overview.Funding_Information,t.partners=e.data.Overview.Partnership_Organizations,t.partnerInsgt=e.data.Overview.Partnership_Organizations_Insight,t.outcomeInfo=e.data.Overview.Outputs_Outcomes_Info.Listing,t.goalTitle=e.data.Overview.Outputs_Outcomes_Info.GoalTitle,t.outcomeInfoSupportedProjects=t.outcomeInfo.filter(function(t){return t.isSupported}),t.leftpr=t.outcomeInfo.length-t.outcomeInfoSupportedProjects.length,t.comments=e.data.Overview.Insight,t.secpage=e.data.Theory_of_Change,t.th_summary=t.secpage.Summary_Section.Summary,t.th_insight=t.secpage.Summary_Section.Insight,t.blockIns=t.secpage.Summary_Section_Block.Insight,t.inputs=t.secpage.Summary_Section_Block.Input.Points,t.activites=t.secpage.Summary_Section_Block.Activities.Points,t.Intoutputs=t.secpage.Summary_Section_Block.IntendentOutput.Points,t.Intoutcomes=t.secpage.Summary_Section_Block.IntendentOutcomes.Points,t.follow="Follow",t.is_following=!1,t.keyAss=t.secpage.Key_Assumptions,t.solutions=t.secpage.Solutions,t.problms=t.secpage.Problem_Statements,l(0),t.outputs=e.data.Overview.Outputs_Outcomes_Info.Project_Output_Section,t.outputs_tag_={},t.outcomes_tag_={},$.each(t.outputs,function(e,n){t.outputs_tag_[e]={},$.each(n.Tags,function(n,a){t.outputs_tag_[e][n]=!1})}),t.outcomes=e.data.Overview.Outputs_Outcomes_Info.Project_Outcomes_Section,$.each(t.outcomes,function(e,n){t.outcomes_tag_[e]={},$.each(n.Tags,function(n,a){t.outcomes_tag_[e][n]=!1})}),t.intotal=0,m(t.outcomeInfoSupportedProjects[0]),t.milestone=t.projectData.Milestones.Listing,t.milestone_insite=t.projectData.Milestones.Insight,t.milestone1=t.projectData.Milestones.Listing,t.teams=t.projectData.People_Partnership.TeamMember,t.teams_insight=t.projectData.People_Partnership.TeamMember_Insight,t.list_org=t.projectData.People_Partnership.Listing,t.part_insight=t.projectData.People_Partnership.People_Partnership_Insight,t.orgSlider=c(t.list_org,3),u(t.list_org[0],0),$.each(t.outputs,function(e,n){t.obj2[n.Project_Output_Primary_Key]=!1}),t.fundSec=t.projectData.Fund_and_Risk.Funding_Round_Section,t.fund_ins=t.projectData.Fund_and_Risk.Fund_and_Risk_Insight,t.fundSecAmnt=t.projectData.Fund_and_Risk.Funding_Amount_Section,t.fundSourc=t.projectData.Fund_and_Risk.Source_of_Funding.Listing,t.notesInv=t.projectData.Fund_and_Risk.Notes_for_Investor,t.notes_ins=t.projectData.Fund_and_Risk.Notes_for_Investor_Insight,t.fundgraph=t.projectData.Fund_and_Risk.Funding_rasing_over_the_period_of_time,t.sustain=t.projectData.Fund_and_Risk.Sustainability,t.social_color=[],t.financialxls=t.projectData.Fund_and_Risk.Financial_Management.Listing,t.financialInsght=t.projectData.Fund_and_Risk.Financial_Management.Financial_Insight,t.circle_title=t.projectData.Fund_and_Risk.Financial_Management_Chart.CenterCircle,t.circle_tIcon=t.projectData.Fund_and_Risk.Financial_Management_Chart.CenterCircleIcon,t.circle_tDesc=t.projectData.Fund_and_Risk.Financial_Management_Chart.CenterCirclePopoverText,t.FinancialChartInsight=t.projectData.Fund_and_Risk.Financial_Management_Chart.FinancialChartInsight,t.circle_Listing=t.projectData.Fund_and_Risk.Financial_Management_Chart.Listing,s(t.circle_Listing[0].CirclePopoverText,t.circle_Listing[0].CircleIcon,t.circle_Listing[0].CircleText),t.countryChart=e.data.CommunitiesImpactedPage.Communities[0].ListofItems,t.Investments=e.data.CommunitiesImpactedPage.Investments,$.each(t.Investments,function(e,n){t.intotal=t.intotal+parseInt(n.Value)}),t.community=e.data.CommunitiesImpactedPage.Communities[0],t.selectedYear=t.community.years[0],t.selectedDataset=t.selectedYear.dataset[0],t.CountryName=e.data.CommunitiesImpactedPage.Communities[0].CountryName,t.CommunityName=e.data.CommunitiesImpactedPage.Communities[0].CommunityName,$.each(e.data.CommunitiesImpactedPage.Communities,function(e,n){t.selcountry[n.CountryName]="",t.selcountry[n.CountryName]=!1}),t.invstChart=e.data.CommunitiesImpactedPage.Investments,t.invest_color=[],t.CommunityInsights=e.data.CommunitiesImpactedPage.CommunityInsights,t.Impact_Reports=e.data.CommunitiesImpactedPage.Impact_Reports.Listing,t.Investments=e.data.CommunitiesImpactedPage.Investments,t.Communities=e.data.CommunitiesImpactedPage.Communities,$.each(t.Communities,function(e,n){t.Country_name=t.Communities[e].CountryName,t.Latitude=t.Communities[e].Latitude,t.Longitude=t.Communities[e].Longitude,t.Country_value=t.Communities[e].Countryvalue,t.countrylist.push({id:t.Country_name,value:t.Country_value}),t.countrylist_new.push({latLng:[t.Latitude,t.Longitude],name:t.Country_name})}),r(0),t.socialReturnValue=0,t.Funding_rasing_GraphPlotting=t.projectData.Fund_and_Risk.Funding_rasing_over_the_period_of_time.GraphPlotting,$.each(t.Funding_rasing_GraphPlotting,function(e,n){t.Funding_rasing_GraphPlotting1.push({label:n.Year,value:n.Amount})})}).then(function(){communitiesImpacted()}),t.following=function(){if(t.follow="Following",t.ProjSec.TotalFollower=t.ProjSec.TotalFollower+"",-1!=t.ProjSec.TotalFollower.indexOf(","))var e=parseInt(t.ProjSec.TotalFollower.replace(",",""));else var e=t.ProjSec.TotalFollower;e=parseInt(e),t.is_following?(e=e-1+"",t.follow="Follow",t.is_following=!1,t.ProjSec.TotalFollower=e.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")):(t.is_following=!0,e=e+1+"",t.ProjSec.TotalFollower=e.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))},t.timeDiffInMinutes=function(e){var n=new Date,a=n.getDate(),o=n.getMonth()+1,i=n.getFullYear();a<10&&(a="0"+a);o<10&&(o="0"+o);n=i+"/"+o+"/"+a,t.today=n;var s=new Date(n),r=new Date(e),l=Math.abs(s.getTime()-r.getTime());return Math.ceil(l/864e5)},t.dateMonth=function(t){const e=new Date(t);return e.getDate()+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]},t.selectProject=l,t.showInvest=function(){$("#investModal").modal("show")},t.hight_outcome=function(e){$.each(t.obj,function(e,n){t.obj[e]=!1}),t.obj[e]=!0},t.showDesc=u,t.mileStCmnt=function(e){$(".maile_stone_moal").modal("show"),t.milst_cmnt=e},t.testGal=function(t){$("#image-gallery").modal("show"),$("#image-gallery-image").attr("src",t)},t.selectProj=m,t.impact_fg={},t.closeformula=function(e,n){t.impact_fg[e][n]=!1},t.myDataSource={chart:{caption:"Funding Over Time(in millions)",numberprefix:"$",rotatelabels:"0",theme:"fusion"},data:t.Funding_rasing_GraphPlotting1},t.showtag=function(e,n){$.each(t.outputs_tag_[e],function(n,a){t.outputs_tag_[e][n]=!1}),t.outputs_tag_[e][n]=!0},t.showoutcomestag=function(e,n){$.each(t.outcomes_tag_[e],function(n,a){t.outcomes_tag_[e][n]=!1}),t.outcomes_tag_[e][n]=!0},t.closeouttag=function(e,n){t.outputs_tag_[e][n]=!1},t.mileStTask=function(e){$(".milestone_task").modal("show"),t.milst_task=e},t.mileStAttach=function(e){$(".milestone_attach").modal("show"),t.milst_attach=e},t.invests=function(e,n){t.Investments[n].Value=e,$.each(t.Investments,function(t,a){t==n&&""==e&&(e=parseInt(0))}),t.intotal=0,$.each(t.Investments,function(e,n){""!==n.Value&&(t.intotal+=parseInt(n.Value))}),$.each(t.Investments,function(e,n){t.Investments[e].color=t.invest_color[e].color}),getinputvalue()},t.intotals=t.intotals,t.showInvestmentModal=function(){$("#investmentModal").modal("show")}}])},function(t,e){},,,,,function(t,e){},,function(t,e){},,function(t,e){},,function(t,e){}]);